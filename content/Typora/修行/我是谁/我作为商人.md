

























## 我在嘉楠慧光做什么



我是蔡嘉文，我在公司主要负责做资产配置的决策。（一般来说，一个资产管理公司的主要工作可以分为资产配置，运营管理和维护投资人关系，我负责的就是做资产配置的决策。）

一般的资管公司都有很多套策略，我们也不例外，现在主要在跑的是期现套利的策略。

#### 期现套利



- 期现套利是什么
- 我们的优势在哪里
- 风控
  - 我们公司期现套利的风控分为两个部分。
  - 一个是开启策略前的风控，也就是我会根据每个仓的仓位大小，手续费比例，以及我对这个币种的走势预判来确定每个仓的参数。我们现在跑了大概1年多，效果还不错。我的理念是生存比盈利重要得多，所以我会尽量降低回撤，而且在出现浮亏得时候也及时减仓，不会像LTCM那样去硬抗。
  - 一个是策略跑起来以后的风控，有的时候价差单边增长得比较猛，这个时候还没有爆仓，但我们会提前把杠杆给降下来。另外一个就是如果价格在涨20%或者跌20%就要爆仓了，这个时候我们的程序会自动给我们发警报，一直打电话，直到我们把问题给处理掉（比如加保证金）。



#### 强化学习策略

story , not thesis.

- 为什么要做这个
  - 我一直对大脑是如何学习和决策比较感兴趣。一方面我在学习一些脑科学，认知科学相关的知识，一方面我也每天在做实践，当然我的实践就是参与公司里资产配置的决策，我每天都在做自己感兴趣的事情，每天都比较快乐。
  - 除此以外，我也对计算机是怎么学习和决策很感兴趣，我上大学本科的时候自学了很多计算机，机器学习的知识，也做过一些实践，比如预测信贷的风险，参加过一些数据挖掘的比赛。后来我上学的时候有个大新闻，也就是 alphago 战胜了李世石，当时我看了直播，觉得这个叫 deepmind 的公司很厉害，就去了解了一下他们用到的技术，叫深度强化学习。
  - 我觉得这个技术很厉害，因为强化学习和人的大脑学习和做决策的方式非常像，都是先做预测，然后根据预测选择行动，根据行动的反馈来调整模型。
  - 但是当时一是我还没开始做量化交易，二是没有强大的机器（深度强化学习需要很强大的cpu或者gpu），我暂时就把这个事情给忘了。
  - 过了两年，我开始做量化交易了，做了一些能够盈利的套利类的策略。虽然这些策略都能够赚钱，但我还是有一些心有戚戚焉，因为这些策略的主逻辑都比较简单，并不是那种跨越时代的创新，其实我们现在做的期现套利，可能跟10几年前LTCM他们做的差不多，只是应用到了不同的市场上去。
  - 当时另外一家做强化学习的公司 openai 做了一个很有意思的东西，是 dota2 的单挑机器人， 这个机器人把很多冠军中单都给打败了，这个事情对我触动很大。因为我们都是dota2的老玩家，高中的时候我们经常中午跑出去玩dota。我觉得dota是蛮复杂的一个游戏，没想到用深度强化学习给搞定了，所以我觉得无论如何都要把它给学一下。
  - 于是我开始学习，开始我找了一些视频，deepmind在ucl开了相关的课程，openai在berkeley开了相关课程，我看了一部分视频就开始实践，做了一些智能的agent , 在很多游戏上都达到了超出我自己的水平，例如一个打乒乓球的游戏，还有一个是打网球的游戏。

- 我怎么做的
  - 然后我就准备开始自己来做一套以深度强化学习为框架的策略。首先先得有数据，所以我自己开始采集okex的现货和期货的高频数据，我大概存了3个月左右的数据。我写这套存数据的东西也是我们另外一个项目比特塔的起源，在这里暂时就不展开了。
  - 然后我自己写了一整套的回测框架，回测的意思就是用历史数据来做模拟，我们用这套策略在历史环境里面跑，可以得到一些关于策略的信息，例如这个策略的收益如何，回撤如何，成交情况如何，可以用很多统计量来初步感受这套策略。
  - 然后就是一些算法的细节，我选择了PPO算法作为主要算法，因为这个是当时适用性最好的一个算法。然后我用手工构造了很多个特征，都是从订单簿和订单流里面构建出来的。我把行动设成了限价买单，限价卖单，市价买单，市价卖单还有什么都不做。
  - 最后我们得到的结果是非常有趣的，机器人跑了几轮数据确实显示出了『智能』的迹象。例如在一个强烈上涨得趋势中，他会疯狂地开市价买单去跟踪趋势，但是如果市场走得是一个震荡的形式的话，很有可能这个机器人就会去下限价单，或者就什么都不做。

- 未来怎么改进
  - Deepmind的创始人他在游戏公司工作了一段时间后，跑去读了一个神经科学的phd，主要研究海马体。海马体是大脑中负责记忆的区域，所以他做的研究大多数都跟记忆有关系，一个比较出名的就是deep q network , 他为神经网络引入了记忆机制，也就是每条数据不一定只被学习一次，每次学习了以后，他会把数据放到一个类似『记忆库』的地方去，在下一轮训练的时候根据某个概率分布再在这个记忆库里面抽样。
  - 我怎么改进？（结合芒格的误判心理学和卡尼曼的东西）

#### 基本面和大趋势

一些关注基本面的低频方面的决策，现在我主要靠人脑而不是计算机。比如最近我在看奥地利经济学派的东西，里面讲了一些很重要的东西，比如货币是怎么演化出来，什么样的商品作为货币竞争力比较强，这些都是比特币能涨这么多最底层的逻辑。





## 我在比特塔做什么

