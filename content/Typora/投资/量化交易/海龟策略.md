# 海龟策略

### 计算平均波动

$$ATR = max(H-L , H-PDC , PDC-L)$$

其中H为当日最高价， L为当日最低价 ， PDC为前一日收盘价

初始的N按以下方式计算

$$ N = MA20(ATR) $$

此后N用滑动平均的方式更新

$$N = 19/20 PDN + 1/20 ATR  $$

其中PDN 代表前一天的N



### 确定开仓单位

在 1 个开仓单位时，当价格变化N , 净值会移动 1 个百分点。假设一个开仓单位的资金量为 x ， 那么

$$ x * N / price = 1\%balance $$

可得

$$ x = 1\%balance * price / N$$



### 开仓平仓加仓止损

#### 开仓

超过20日最高点即买入

#### 加仓

价格每上涨 1/2 N 加仓一个开仓单位，最多加到4个单位

#### 止损

当价格从最高开仓价格往下2N时，止损

#### 平仓

若低于10日最低点，平掉所有仓位



















