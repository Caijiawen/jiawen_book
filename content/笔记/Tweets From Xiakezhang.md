# Tweets From Xiakezhang

![rw-book-cover](https://pbs.twimg.com/profile_images/1593178268483534848/yPDOxW8m.jpg)

## Metadata
- Author: [[@nigdaemon on Twitter]]
- Full Title: Tweets From Xiakezhang
- Category: #tweets
- URL: https://twitter.com/nigdaemon

## Highlights
- **Chainflip 原生资产跨链DEX**
  Chainflip不是跨链桥，也不是单纯的DEX，它是解决原生资产直接交易的跨链DEX。
  关键词原生资产，在uniswap中用ETH购买WBTC，虽然可以满足两个标的价格互换，但并没有实现真正的原生资产交换。WBTC的安全还是偏中心化。
  区块链发展至今，有非常多的公链，Bitccoin和Ethereum是最大的两个。这些公链就像一个个加密国家，都有自己的基础货币。
  Chainflip要解决的就是公链间原生资产的直接互换，不通过其他第三方机构，实现BTC到ETH、DOT、SOL等原生资产的双向互换。
  为什么最近Thorchain很火，从交易量可以看到，最近3个月它的交易量排在DEX第二，增长非常迅猛，因为它直接释放了最大加密资产BTC的购买力。
  Chainflip与Thorchain是同赛道的项目，但是在实现机制上略有不同。本文主要分析它的技术机制和代币模型。
  **➡️各组件与技术实现**
  Chainflip的核心主要由两个系统组成。
  系统一是一套资金结算vault，简单说就是在比特币网络和以太坊及其他网络上的钱包。所有资金都通过这些钱包进出，没有任何的包裹资产，因此可以实现原生资产互换。
  系统二是Chainflip的状态链，这个链由150个核心节点控制，他们共同决定chainflip的各种操作执行。
  **➡️Vaults 资金池的设计**
  Chainflip的vault基于MPC（多方安全计算）和TSS（门限签名）技术构建，需要150个节点的100个同时签名确认，才能对vault中的资金进行操作。
  举例来说，状态链就像一个windows系统，但这个系统的维护不是由单一计算机硬件维护，而是由150个节点共同维护，因此是去中心化的系统。
  要想进入这个系统进行资金操作，密码不是一个固定的密码。而是由这150个节点其中的100的共同签名来验证的。
  也就是说，像咱们个人电脑，只要自己输入一个密码就进去了。而chainflip系统，需要150个节点中的100个不同节点输入他们只有自己知道的密钥，再通过TSS的计算后才能打开Chainflip系统，实现资金操作。
  在底层安全上，系统的最核心部分就是vault的密钥计算，只要2/3的系统节点不被控制，相对来说资金就是安全的。
  那来看，如何才能成为节点，而节点又是如何保护链安全的。
  **➡️状态链的设计**
  Chainflip的状态链是整个系统的核心，它负责控制Vaults中的资金，见证每条链上的资金存入、分发奖励、广播交易、记录所有的操作，它就是chainflip底层的核心系统。
  这个系统是由150个核心节点来共同控制的。节点间互相监督，如果有节点作恶，被其他节点察觉，就会面临惩罚。
  Chainflip的节点分为节点和备选节点，它们由竞拍的方式产生。要参与竞拍必须持有flip代币，在一个竞拍周期中，持有代币数量前150的节点，被选为核心节点，在这个周期结束后，如果没有出错，就会获得7%的增发奖励。
  为了让更多节点参与到竞拍中，非前150名的节点，但只要在全部节点的前1/3位置，就可以成为备选节点，获得1%的增发奖励。
  Chainflip的节点奖励是按照平均分配的原则发放，而非按比例。这么做的好处是避免资本过大导致的过于垄断。
  **➡️状态链的功能**
  Chainflip的状态链通过核心节点共识后，主要负责整个DEX过程的见证和执行。
  其中包括，当交易者向vault存入资金时，状态链节点会发现这一过程，并向其他节点广播，其他节点会独立验证这一过程，确保广播的真实性。
  一旦全部节点达成一致，用户的存入资金就会被记账，用户接下来的交易。
  当交易完成，需要在目标链向用户发放原生资产，这是各节点会采用100/150的签名方式，控制目标链的vault钱包向用户转账，进而完成整个交易过程。
  全部交易过程的原链和目标链操作，都会被记录在状态链上。
  **➡️JIT AMM 交易报价**
  以上的功能可以确保用户交易的资金从原链到目标链的原生性和安全性，但交易时用户最关心的还是价格。
  Chainflip通过JIT AMM的方式实现交易的定价。在官方文档中，把这一模式描写为虚拟的uniswap v3的报价方式。但实际我个人觉得有点误导人。
  这个方法我个人理解其实就是一个订单薄系统，靠做市商来报价完成交易，不存在虚拟的AMM转换。
  简单说，就是当用户要交易时，先存入资金，然后做市商就会质押目标资产来报价，最优的价格会得到执行。
  整个状态链会聚合同一时期的交易，批量的在目标链之心，这也相对节约gas。
  **➡️技术难点和风险**
  由于不同区块链的共识周期不同，还存在链重组的问题。因此这种原生资产跨链交易，最大的问题是时效性和过程的价格波动。
  在Chainflip的设计中，交易的确定时间在90秒。也就是说，这一交易过程并不是及时执行的。
  由于依靠做市商的报价，且这一报价实在一个90秒的时间去竞价，所以在用户发起交易时，是无法确定滑点偏差的。最终用户只有被动接受做市商的出价。
  这也是个人觉得目前最大的风险点之一，如果做市商有串谋，或者某一刻确实只有一两个做市商参与，用户的交易滑点可能会非常大。
  **➡️经济模型**
  Chainflip的代币总量9000万。目前每年通胀8%。核心节点分配7%，备选节点分配1%。
  **种子轮单价在0.16，分配2291万代币。A轮单价0.5，分配1160万代币。前段在coinlist的代币销售，单价在1.83，分配206万代币。**
  ➡️**最后**
  原生资产跨链DEX的项目目前较少，交易量目前集中在ETH/BTC交易对。
  其中个人觉得大部分交易量还是在ETH加强审查后，很多对隐私有更多要求的资金在走这个链路去到比特币网络。
  如果要让这类协议达到Uniswap，甚至CEX的交易量，可能还需要技术的持续创新和安全性的持续提高。<img src='https://pbs.twimg.com/media/GAPrqVsa0AELPsR.jpg'/> ([View Tweet](https://twitter.com/nigdaemon/status/1730485810070474771))
